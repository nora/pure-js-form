(()=>{"use strict";class e{get isValid(){throw new Error("not implemented")}}class t extends e{constructor(e,t=null){super(),this.name=e.name,this.inputElement=e,this.formContainer=t,this.validity=e.validity}static get ERROR_MESSAGE_ATTRIBUTE_NAME(){return"data-attr-name"}static get CHANGED_CLASS_NAME(){return"changed"}validate(){return this.errorMessage=this.validationMessage,this.addChangedClass(),this.isValid}addChangedClass(){return this.inputElement.classList.add(t.CHANGED_CLASS_NAME)}get isValid(){return this.validity.valid}get parent(){return this.formContainer??window.document}get errorMessageElement(){return this.parent.querySelector(this.errorMessageElementSelector)}get errorMessageElementSelector(){return`[${t.ERROR_MESSAGE_ATTRIBUTE_NAME}="${this.name}"]`}set errorMessage(e){this.errorMessageElement.textContent=e}get validationMessage(){return this.inputElement.validationMessage}}const r=document.querySelector("form");new class extends e{constructor(e,t){super(),this.formContainer=e,this.remoteValidator=t,this._errors=[],this.inputValidators=this.createInputValidatorList([...e.elements]),e.addEventListener("change",(e=>{this.handleChangeFormControll(e)})),e.addEventListener("submit",(e=>{this.handleSubmit(e)}))}get isValid(){return this.formContainer.reportValidity()}createInputValidatorList(e){return e.map((e=>new t(e)))}handleChangeFormControll({target:{name:e}}){this.findValidatorByName(e).validate()}async handleSubmit(e){e.preventDefault(),await this.validate()&&this.formContainer.submit()}findValidatorByName(e){return this.inputValidators.find((({name:t})=>t===e))}async validate(){return!!this.isValid&&(this.remoteValidate&&(this.errors=await this.remoteValidate()),!this.errors.length)}async remoteValidate(){return this.remoteValidator?this.remoteValidator():[]}set errors(e){e.forEach((e=>{this.errorMessage=e})),this._errors=e}get errors(){return this._errors}set errorMessage({attributeName:e,message:t}){return this.findValidatorByName(e).errorMessage=t,t}}(r,(async()=>[{attributeName:"name",message:"既に使用されている名前です"},{attributeName:"email",message:"無効なメールアドレスです"},{attributeName:"flavor",message:"嘘をついてはいけません"}]))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9wdXJlLWpzLWZvcm0vLi9zcmMvY2xhc3MvVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3B1cmUtanMtZm9ybS8uL3NyYy9jbGFzcy9JbnB1dFZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9wdXJlLWpzLWZvcm0vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vcHVyZS1qcy1mb3JtLy4vc3JjL2NsYXNzL0Zvcm1WYWxpZGF0b3IuanMiXSwibmFtZXMiOlsiVmFsaWRhdG9yIiwiRXJyb3IiLCJJbnB1dFZhbGlkYXRvciIsImVsZW1lbnQiLCJmb3JtQ29udGFpbmVyIiwic3VwZXIiLCJ0aGlzIiwibmFtZSIsImlucHV0RWxlbWVudCIsInZhbGlkaXR5IiwiZXJyb3JNZXNzYWdlIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJhZGRDaGFuZ2VkQ2xhc3MiLCJpc1ZhbGlkIiwiY2xhc3NMaXN0IiwiYWRkIiwiQ0hBTkdFRF9DTEFTU19OQU1FIiwidmFsaWQiLCJ3aW5kb3ciLCJkb2N1bWVudCIsInBhcmVudCIsInF1ZXJ5U2VsZWN0b3IiLCJlcnJvck1lc3NhZ2VFbGVtZW50U2VsZWN0b3IiLCJFUlJPUl9NRVNTQUdFX0FUVFJJQlVURV9OQU1FIiwidGV4dCIsImVycm9yTWVzc2FnZUVsZW1lbnQiLCJ0ZXh0Q29udGVudCIsInJlbW90ZVZhbGlkYXRvciIsIl9lcnJvcnMiLCJpbnB1dFZhbGlkYXRvcnMiLCJjcmVhdGVJbnB1dFZhbGlkYXRvckxpc3QiLCJlbGVtZW50cyIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsImhhbmRsZUNoYW5nZUZvcm1Db250cm9sbCIsImhhbmRsZVN1Ym1pdCIsInJlcG9ydFZhbGlkaXR5IiwibWFwIiwidGFyZ2V0IiwiZmluZFZhbGlkYXRvckJ5TmFtZSIsInZhbGlkYXRlIiwicHJldmVudERlZmF1bHQiLCJzdWJtaXQiLCJsb29raW5nTmFtZSIsImZpbmQiLCJyZW1vdGVWYWxpZGF0ZSIsImVycm9ycyIsImxlbmd0aCIsImZvckVhY2giLCJlcnJvciIsImF0dHJpYnV0ZU5hbWUiLCJtZXNzYWdlIiwiYXN5bmMiXSwibWFwcGluZ3MiOiJtQkFBTyxNQUFNQSxFQUNYLGNBQ0UsTUFBTSxJQUFJQyxNQUFNLG9CQ0FiLE1BQU1DLFVBQXVCRixFQUlsQyxZQUFZRyxFQUFTQyxFQUFnQixNQUNuQ0MsUUFDQUMsS0FBS0MsS0FBT0osRUFBUUksS0FDcEJELEtBQUtFLGFBQWVMLEVBQ3BCRyxLQUFLRixjQUFnQkEsRUFDckJFLEtBQUtHLFNBQVdOLEVBQVFNLFNBRzFCLDBDQUNFLE1BQU8saUJBR1QsZ0NBQ0UsTUFBTyxVQUdULFdBR0UsT0FGQUgsS0FBS0ksYUFBZUosS0FBS0ssa0JBQ3pCTCxLQUFLTSxrQkFDRU4sS0FBS08sUUFHZCxrQkFDRSxPQUFPUCxLQUFLRSxhQUFhTSxVQUFVQyxJQUFJYixFQUFlYyxvQkFHeEQsY0FDRSxPQUFPVixLQUFLRyxTQUFTUSxNQUd2QixhQUNFLE9BQU9YLEtBQUtGLGVBQWlCYyxPQUFPQyxTQUd0QywwQkFDRSxPQUFPYixLQUFLYyxPQUFPQyxjQUFjZixLQUFLZ0IsNkJBR3hDLGtDQUNFLE1BQU8sSUFBSXBCLEVBQWVxQixpQ0FBaUNqQixLQUFLQyxTQU1sRSxpQkFBaUJpQixHQUNmbEIsS0FBS21CLG9CQUFvQkMsWUFBY0YsRUFHekMsd0JBQ0UsT0FBT2xCLEtBQUtFLGFBQWFHLG1CQ3REN0IsTUFBTVAsRUFBZ0JlLFNBQVNFLGNBQWMsUUFZN0MsSUNYTyxjQUE0QnJCLEVBS2pDLFlBQVlJLEVBQWV1QixHQUN6QnRCLFFBQ0FDLEtBQUtGLGNBQWdCQSxFQUNyQkUsS0FBS3FCLGdCQUFrQkEsRUFDdkJyQixLQUFLc0IsUUFBVSxHQUVmdEIsS0FBS3VCLGdCQUFrQnZCLEtBQUt3Qix5QkFBeUIsSUFDaEQxQixFQUFjMkIsV0FFbkIzQixFQUFjNEIsaUJBQWlCLFVBQVVDLElBQ3ZDM0IsS0FBSzRCLHlCQUF5QkQsTUFFaEM3QixFQUFjNEIsaUJBQWlCLFVBQVVDLElBQ3ZDM0IsS0FBSzZCLGFBQWFGLE1BSXRCLGNBQ0UsT0FBTzNCLEtBQUtGLGNBQWNnQyxpQkFNNUIseUJBQXlCTCxHQUN2QixPQUFPQSxFQUFTTSxLQUFJbEMsR0FBVyxJQUFJRCxFQUFlQyxLQU1wRCwwQkFBMkJtQyxRQUFRLEtBQUUvQixLQUNuQ0QsS0FBS2lDLG9CQUFvQmhDLEdBQU1pQyxXQU1qQyxtQkFBbUJQLEdBQ2pCQSxFQUFNUSx1QkFDRW5DLEtBQUtrQyxZQUFlbEMsS0FBS0YsY0FBY3NDLFNBTWpELG9CQUFvQkMsR0FDbEIsT0FBT3JDLEtBQUt1QixnQkFBZ0JlLE1BQUssRUFBR3JDLFVBQVdBLElBQVNvQyxJQUcxRCxpQkFDRSxRQUFLckMsS0FBS08sVUFFTlAsS0FBS3VDLGlCQUNQdkMsS0FBS3dDLGFBQWV4QyxLQUFLdUMsbUJBR25CdkMsS0FBS3dDLE9BQU9DLFFBR3RCLHVCQUNFLE9BQU96QyxLQUFLcUIsZ0JBQWtCckIsS0FBS3FCLGtCQUFvQixHQUd6RCxXQUFXbUIsR0FDVEEsRUFBT0UsU0FBUUMsSUFDYjNDLEtBQUtJLGFBQWV1QyxLQUV0QjNDLEtBQUtzQixRQUFVa0IsRUFHakIsYUFDRSxPQUFPeEMsS0FBS3NCLFFBR2Qsa0JBQWlCLGNBQUVzQixFQUFhLFFBQUVDLElBR2hDLE9BRnVCN0MsS0FBS2lDLG9CQUFvQlcsR0FDakN4QyxhQUFleUMsRUFDdkJBLElEeEVPL0MsR0FYVWdELFNBSW5CLENBQ0wsQ0FBRUYsY0FBZSxPQUFRQyxRQUFTLGlCQUNsQyxDQUFFRCxjQUFlLFFBQVNDLFFBQVMsZ0JBQ25DLENBQUVELGNBQWUsU0FBVUMsUUFBUyxtQiIsImZpbGUiOiJpbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjbGFzcyBWYWxpZGF0b3Ige1xuICBnZXQgaXNWYWxpZCgpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ25vdCBpbXBsZW1lbnRlZCcpXG4gIH1cbn1cbiIsImltcG9ydCB7IFZhbGlkYXRvciB9IGZyb20gJy4vVmFsaWRhdG9yJ1xuXG5leHBvcnQgY2xhc3MgSW5wdXRWYWxpZGF0b3IgZXh0ZW5kcyBWYWxpZGF0b3Ige1xuICAvKipcbiAgICogQHBhcmFtIHtIVE1MSW5wdXRFbGVtZW50fSBlbGVtZW50XG4gICAqL1xuICBjb25zdHJ1Y3RvcihlbGVtZW50LCBmb3JtQ29udGFpbmVyID0gbnVsbCkge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLm5hbWUgPSBlbGVtZW50Lm5hbWVcbiAgICB0aGlzLmlucHV0RWxlbWVudCA9IGVsZW1lbnRcbiAgICB0aGlzLmZvcm1Db250YWluZXIgPSBmb3JtQ29udGFpbmVyXG4gICAgdGhpcy52YWxpZGl0eSA9IGVsZW1lbnQudmFsaWRpdHlcbiAgfVxuXG4gIHN0YXRpYyBnZXQgRVJST1JfTUVTU0FHRV9BVFRSSUJVVEVfTkFNRSgpIHtcbiAgICByZXR1cm4gJ2RhdGEtYXR0ci1uYW1lJ1xuICB9XG5cbiAgc3RhdGljIGdldCBDSEFOR0VEX0NMQVNTX05BTUUoKSB7XG4gICAgcmV0dXJuICdjaGFuZ2VkJ1xuICB9XG5cbiAgdmFsaWRhdGUoKSB7XG4gICAgdGhpcy5lcnJvck1lc3NhZ2UgPSB0aGlzLnZhbGlkYXRpb25NZXNzYWdlXG4gICAgdGhpcy5hZGRDaGFuZ2VkQ2xhc3MoKVxuICAgIHJldHVybiB0aGlzLmlzVmFsaWRcbiAgfVxuXG4gIGFkZENoYW5nZWRDbGFzcygpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZChJbnB1dFZhbGlkYXRvci5DSEFOR0VEX0NMQVNTX05BTUUpXG4gIH1cblxuICBnZXQgaXNWYWxpZCgpIHtcbiAgICByZXR1cm4gdGhpcy52YWxpZGl0eS52YWxpZFxuICB9XG5cbiAgZ2V0IHBhcmVudCgpIHtcbiAgICByZXR1cm4gdGhpcy5mb3JtQ29udGFpbmVyID8/IHdpbmRvdy5kb2N1bWVudFxuICB9XG5cbiAgZ2V0IGVycm9yTWVzc2FnZUVsZW1lbnQoKSB7XG4gICAgcmV0dXJuIHRoaXMucGFyZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5lcnJvck1lc3NhZ2VFbGVtZW50U2VsZWN0b3IpXG4gIH1cblxuICBnZXQgZXJyb3JNZXNzYWdlRWxlbWVudFNlbGVjdG9yKCkge1xuICAgIHJldHVybiBgWyR7SW5wdXRWYWxpZGF0b3IuRVJST1JfTUVTU0FHRV9BVFRSSUJVVEVfTkFNRX09XCIke3RoaXMubmFtZX1cIl1gXG4gIH1cblxuICAvKipcbiAgICogQHBhcmFtIHtTdHJpbmd9IHRleHRcbiAgICovXG4gIHNldCBlcnJvck1lc3NhZ2UodGV4dCkge1xuICAgIHRoaXMuZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IHRleHRcbiAgfVxuXG4gIGdldCB2YWxpZGF0aW9uTWVzc2FnZSgpIHtcbiAgICByZXR1cm4gdGhpcy5pbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2VcbiAgfVxufVxuIiwiaW1wb3J0IHsgRm9ybVZhbGlkYXRvciB9IGZyb20gJy4vY2xhc3MvRm9ybVZhbGlkYXRvcidcblxuY29uc3QgZm9ybUNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2Zvcm0nKVxuY29uc3QgbW9ja1JlbW90ZVZhbGlkYXRvciA9IGFzeW5jICgpID0+IHtcbiAgLyoqXG4gICAqIOODouODg+OCryA+PiDlrp/pmpvjga9BUEnjgafmpJzoqLzjgZnjgovlh6bnkIbjgpLmm7jjgY9cbiAgICovXG4gIHJldHVybiBbXG4gICAgeyBhdHRyaWJ1dGVOYW1lOiAnbmFtZScsIG1lc3NhZ2U6ICfml6Ljgavkvb/nlKjjgZXjgozjgabjgYTjgovlkI3liY3jgafjgZknIH0sXG4gICAgeyBhdHRyaWJ1dGVOYW1lOiAnZW1haWwnLCBtZXNzYWdlOiAn54Sh5Yq544Gq44Oh44O844Or44Ki44OJ44Os44K544Gn44GZJyB9LFxuICAgIHsgYXR0cmlidXRlTmFtZTogJ2ZsYXZvcicsIG1lc3NhZ2U6ICflmJjjgpLjgaTjgYTjgabjga/jgYTjgZHjgb7jgZvjgpMnIH0sXG4gIF1cbn1cblxubmV3IEZvcm1WYWxpZGF0b3IoZm9ybUNvbnRhaW5lciwgbW9ja1JlbW90ZVZhbGlkYXRvcilcbiIsImltcG9ydCB7IFZhbGlkYXRvciB9IGZyb20gJy4vVmFsaWRhdG9yJ1xuaW1wb3J0IHsgSW5wdXRWYWxpZGF0b3IgfSBmcm9tICcuL0lucHV0VmFsaWRhdG9yJ1xuXG5leHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciBleHRlbmRzIFZhbGlkYXRvciB7XG4gIC8qKlxuICAgKiBAcGFyYW0ge0hUTUxGb3JtRWxlbWVudH0gZm9ybUNvbnRhaW5lclxuICAgKiBAcGFyYW0ge0Z1bmN0aW9uPFByb21pc2U+fSByZW1vdGVWYWxpZGF0b3JcbiAgICovXG4gIGNvbnN0cnVjdG9yKGZvcm1Db250YWluZXIsIHJlbW90ZVZhbGlkYXRvcikge1xuICAgIHN1cGVyKClcbiAgICB0aGlzLmZvcm1Db250YWluZXIgPSBmb3JtQ29udGFpbmVyXG4gICAgdGhpcy5yZW1vdGVWYWxpZGF0b3IgPSByZW1vdGVWYWxpZGF0b3JcbiAgICB0aGlzLl9lcnJvcnMgPSBbXVxuXG4gICAgdGhpcy5pbnB1dFZhbGlkYXRvcnMgPSB0aGlzLmNyZWF0ZUlucHV0VmFsaWRhdG9yTGlzdChbXG4gICAgICAuLi5mb3JtQ29udGFpbmVyLmVsZW1lbnRzLFxuICAgIF0pXG4gICAgZm9ybUNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBldmVudCA9PiB7XG4gICAgICB0aGlzLmhhbmRsZUNoYW5nZUZvcm1Db250cm9sbChldmVudClcbiAgICB9KVxuICAgIGZvcm1Db250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgZXZlbnQgPT4ge1xuICAgICAgdGhpcy5oYW5kbGVTdWJtaXQoZXZlbnQpXG4gICAgfSlcbiAgfVxuXG4gIGdldCBpc1ZhbGlkKCkge1xuICAgIHJldHVybiB0aGlzLmZvcm1Db250YWluZXIucmVwb3J0VmFsaWRpdHkoKVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7QXJyYXk8SFRNTElucHV0RWxlbWVudD59IGVsZW1lbnRzXG4gICAqL1xuICBjcmVhdGVJbnB1dFZhbGlkYXRvckxpc3QoZWxlbWVudHMpIHtcbiAgICByZXR1cm4gZWxlbWVudHMubWFwKGVsZW1lbnQgPT4gbmV3IElucHV0VmFsaWRhdG9yKGVsZW1lbnQpKVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7RXZlbnR9XG4gICAqL1xuICBoYW5kbGVDaGFuZ2VGb3JtQ29udHJvbGwoeyB0YXJnZXQ6IHsgbmFtZSB9IH0pIHtcbiAgICB0aGlzLmZpbmRWYWxpZGF0b3JCeU5hbWUobmFtZSkudmFsaWRhdGUoKVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7RXZlbnR9XG4gICAqL1xuICBhc3luYyBoYW5kbGVTdWJtaXQoZXZlbnQpIHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpXG4gICAgOyhhd2FpdCB0aGlzLnZhbGlkYXRlKCkpICYmIHRoaXMuZm9ybUNvbnRhaW5lci5zdWJtaXQoKVxuICB9XG5cbiAgLyoqXG4gICAqIEBwYXJhbSB7U3RyaW5nfSBsb29raW5nTmFtZVxuICAgKi9cbiAgZmluZFZhbGlkYXRvckJ5TmFtZShsb29raW5nTmFtZSkge1xuICAgIHJldHVybiB0aGlzLmlucHV0VmFsaWRhdG9ycy5maW5kKCh7IG5hbWUgfSkgPT4gbmFtZSA9PT0gbG9va2luZ05hbWUpXG4gIH1cblxuICBhc3luYyB2YWxpZGF0ZSgpIHtcbiAgICBpZiAoIXRoaXMuaXNWYWxpZCkgcmV0dXJuIGZhbHNlXG5cbiAgICBpZiAodGhpcy5yZW1vdGVWYWxpZGF0ZSkge1xuICAgICAgdGhpcy5lcnJvcnMgPSBhd2FpdCB0aGlzLnJlbW90ZVZhbGlkYXRlKClcbiAgICB9XG5cbiAgICByZXR1cm4gIXRoaXMuZXJyb3JzLmxlbmd0aFxuICB9XG5cbiAgYXN5bmMgcmVtb3RlVmFsaWRhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMucmVtb3RlVmFsaWRhdG9yID8gdGhpcy5yZW1vdGVWYWxpZGF0b3IoKSA6IFtdXG4gIH1cblxuICBzZXQgZXJyb3JzKGVycm9ycykge1xuICAgIGVycm9ycy5mb3JFYWNoKGVycm9yID0+IHtcbiAgICAgIHRoaXMuZXJyb3JNZXNzYWdlID0gZXJyb3JcbiAgICB9KVxuICAgIHRoaXMuX2Vycm9ycyA9IGVycm9yc1xuICB9XG5cbiAgZ2V0IGVycm9ycygpIHtcbiAgICByZXR1cm4gdGhpcy5fZXJyb3JzXG4gIH1cblxuICBzZXQgZXJyb3JNZXNzYWdlKHsgYXR0cmlidXRlTmFtZSwgbWVzc2FnZSB9KSB7XG4gICAgY29uc3QgaW5wdXRWYWxpZGF0b3IgPSB0aGlzLmZpbmRWYWxpZGF0b3JCeU5hbWUoYXR0cmlidXRlTmFtZSlcbiAgICBpbnB1dFZhbGlkYXRvci5lcnJvck1lc3NhZ2UgPSBtZXNzYWdlXG4gICAgcmV0dXJuIG1lc3NhZ2VcbiAgfVxufVxuIl0sInNvdXJjZVJvb3QiOiIifQ==